# Agentic RAG 评估测试集（幻觉率 & 检索精度）

说明：每道题均需基于既有文档作答。若原文未覆盖，应回答“未知”。评估可根据“期望要点 + 通过判定”执行。

---

## 主测试集（10 题）

### Q1 BFS 求最大层和
- **Query**：复盘力扣 1161 最大层和时，为什么说 BFS 是最自然的？`level_size` 起什么作用？请再写出时间与空间复杂度。
- **期望要点**：
  1. BFS 层序遍历天然按层统计，每轮队列仅包含同层节点。
  2. `level_size` 控制当前层节点数量，用于逐层求和。
  3. 时间复杂度 `O(n)`，空间复杂度 `O(width)`（最坏 `O(n)`）。
- **通过判定**：三点齐全且与文档一致。
- **不通过判定**：缺少任一点或脱离原文。

### Q2 腐烂橘子多源 BFS 初始化
- **Query**：梳理力扣 994 腐烂橘子的多源 BFS 时，初始化需要做哪些操作？`fresh` 如何使用、循环何时停止、最终返回值如何确定？
- **期望要点**：
  1. 遍历网格：腐烂橘子入队，新鲜橘子计数 `fresh`，若 `fresh==0` 立即返回 0。
  2. BFS 按层扩散 4 邻域，处理完一层分钟数 `+1`，新腐烂橘子 `fresh--`。
  3. 当队列空或 `fresh==0` 结束，若 `fresh==0` 返回分钟数，否则返回 -1。
- **通过判定**：覆盖三点。
- **不通过判定**：缺任意要点。

### Q3 回溯递归树高度口径
- **Query**：在 n 位二进制子集的回溯分析里，递归树按边与按节点数的高度分别是多少？时间与空间复杂度如何描述？
- **期望要点**：
  1. 按边计高度为 `n`；按节点数计为 `n+1`。
  2. 时间复杂度 `O(n·2^n)`，空间复杂度 `O(n)`。
- **通过判定**：两种高度及复杂度均说明。
- **不通过判定**：信息不全。

### Q4 乘积最大子数组双状态原因
- **Query**：复习乘积最大子数组时，为什么必须同时维护 `max_prod` 与 `min_prod`？遇到负数时先做什么，再如何更新？
- **期望要点**：
  1. 负数会翻转大小关系，需要同时维护最大/最小乘积。
  2. 遇到负数先交换 `max_prod` 与 `min_prod`。
  3. 再用 `max(x, max_prod*x)`、`min(x, min_prod*x)` 更新。
- **通过判定**：三点齐全。
- **不通过判定**：缺任一点。

### Q5 Perfect / Complete / Full 定义与性质
- **Query**：总结 Perfect / Complete / Full 三类二叉树的简洁定义，并给出 Full 树中叶子与内部节点的数量关系。
- **期望要点**：
  1. Perfect：层层填满、叶子同层，节点数 `2^{h+1}-1`。
  2. Complete：除最后一层外都满，最后一层靠左，可用数组紧凑存储。
  3. Full：每个节点要么 0、要么 2 个孩子。
  4. Full 树满足“叶子数 = 内部节点数 + 1”（总节点 `= 2*叶子-1`）。
- **通过判定**：全部要点覆盖。
- **不通过判定**：缺少任一点。

### Q6 之字形寻路父节点公式
- **Query**：回顾 1104 之字形寻路，父节点标签的计算公式是什么？其中 `start`、`end` 各代表该层的什么范围？
- **期望要点**：
  1. 公式 `parent = (start + end - label) // 2`。
  2. `start = 2^level`，`end = 2^{level+1}-1`，为该层正常编号区间。
- **通过判定**：公式与区间解释齐全。
- **不通过判定**：缺失任一点。

### Q7 最长回文子序列两次 RE
- **Query**：在复盘最长回文子序列的提交记录时，两次 Runtime Error 分别是哪一处代码导致？
- **期望要点**：
  1. 第一次：未先定义 `n` 就使用，导致 `NameError`。
  2. 第二次：返回 `dp[n][n-1]` 越界，应改为 `dp[0][n-1]`。
- **通过判定**：两处错误都指出。
- **不通过判定**：遗漏任一错误。

### Q8 钥匙和房间图建模
- **Query**：复习钥匙和房间题时，如何把问题建模为图？`visited` 集合起什么作用？复杂度为何是 `O(N+E)`？
- **期望要点**：
  1. 房间视为节点，钥匙为有向边，起点房间 0。
  2. 用 DFS/BFS 遍历所有可达房间。
  3. `visited` 防重复访问、避免死循环。
  4. 整体复杂度 `O(N+E)`。
- **通过判定**：四点齐全。
- **不通过判定**：缺少任一点。

### Q9 最低正确率题目统计
- **Query**：在我所有力扣代码提交记录中，哪一道题的非零正确率最低？请写出题名、通过次数/总次数以及成功率
- **期望要点**：
  1. 题目为“解数独”。
  2. 成绩 1/7，成功率约 14.3%。
  3. 说明来自遍历全部提交记录的统计（需要排除表头行）。
- **通过判定**：三点齐全。
- **不通过判定**：题名或数据不对，或未说明统计依据。

### Q10 最小高度树剥叶子原理
- **Query**：在“剥洋葱”式求最小高度树的思路里，为什么要整层删除叶子？何时停止？剩余节点说明了什么？
- **期望要点**：
  1. 叶子在最长路径两端，整层剥离相当于缩短直径逼近中心。
  2. 剩余节点数 `<=2` 时停止。
  3. 剩余的 1~2 个节点即树中心/最小高度根。
- **通过判定**：三点齐全。
- **不通过判定**：缺任一项。

---

## 大海捞针附加题（不计入 10 题）

### N1 最大连续 1 的个数 III 错误更新
- **Query**：复盘最大连续 1 的个数 III 时，错误提交里的 `res` 更新语句是什么？正确写法该怎样？
- **期望要点**：
  1. 错误写法：`res = max(res, right - left + 1 - zero_count)`。
  2. 正确写法：使用窗口长度 `right - left + 1`。
- **通过/不通过**：缺任一点则不通过。

### N2 迷宫最近出口避免入口判定
- **Query**：在迷宫最近出口的 BFS 中，如何避免一开始就把入口判成出口？
- **期望要点**：
  1. 入口立即标记为 `'+'`（已访问）。
  2. 只在扩展到新空地时检查其是否位于边界且为 `'.'`。
- **通过/不通过**：两点缺一不可。

### N3 117 题统一命名含义
- **Query**：在统一常数空间连接模板时，`level_head`、`next_level_dummy`、`next_level_tail` 各自指代什么？
- **期望要点**：
  1. `level_head`：当前层最左节点。
  2. `next_level_dummy`：下一层链表虚拟头。
  3. `next_level_tail`：下一层链表尾指针。
- **通过/不通过**：三点齐全。

---

## 综合推理测试（高难度示例）

### C1 BFS 模板共性与差异
- **Query**：对比“最大层和”的 BFS 与“腐烂橘子”的多源 BFS，它们的流程有哪些共同点？又有哪些差异？请各列举至少 2 条。
- **期望要点**：
  1. 共同点示例：都用队列按层遍历；每次基于队列长度处理一层；处理节点时把下一层/下一分钟状态入队；都有访问控制。
  2. 差异示例：最大层和单源、关注层和与层号；腐烂橘子多源、维护 `fresh` 与分钟数；返回结果不同（层号 vs 分钟/-1）；腐烂橘子每轮扩散四邻且可能提前返回。
  3. 至少列出 2 条共同点与 2 条差异。
- **通过判定**：满足数量要求且内容准确。
- **不通过判定**：条目不足或与文档不符。

---

### 使用建议
1. **自动化评估**：逐题核对期望要点，缺失即判不通过。
2. **针孔抽查**：附加题可随机插入，测试低频信息召回。
3. **容错策略**：若文档确实未覆盖，允许回答“未知”，记为合理未命中而非幻觉。
