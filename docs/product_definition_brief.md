# 本地 Markdown Agentic 检索系统 · 精简产品定义

## 背景
- `my_markdowns/` 存有算法练习对话与提交记录，但缺少结构化索引与可搜索入口。
- 目标是提供一个可信的本地检索界面，能回答复杂问题并引用原文，辅助复盘与错误归因。

## 目标与关键结果
- **总体目标**：基于单一文件夹构建 Agentic 检索 MVP，确保答案准确可追溯。
- **KR1 幻觉率**：10 个问题测试集中的编造率 < 10%。
- **KR2 大海捞针**：3 个唯一事实测试全部命中并返回引用。

## MVP 范围
- 递归索引 `my_markdowns/`，支持增量刷新。
- Agentic 流程：查询理解 → 语义/关键词混合检索 → 阅读理解 → 答复并列出引用。
- Web UI 输入问题，展示答案、引用 `文件:行号`、必要的可信度提示。
- 后端记录检索链与结果至 `backend.log`；非必要功能（多用户/移动端/批量导出）暂不纳入。

## 核心能力
- **索引与检索**：Markdown 解析、分块、向量与 BM25 结合，保留前 `k` 段。
- **回答生成**：引用约束，缺少依据时应拒答；必要时可澄清问题。
- **前端交互**：输入框 + 会话历史，引用可展开原文片段。
- **评估工具**：脚本执行 10 个常规问题 + 3 个大海捞针测试，输出通过/失败与幻觉统计。

## 验收标准
- 幻觉率测试 < 10%，大海捞针测试 100% 通过。
- UI 能展示至少 2 条引用并可跳转原文位置。
- 单次响应时间 ≤ 8s，失败请求有明确提示并写入日志。

## 里程碑示例
1. **完成索引与 CLI 问答**：实现递归索引、检索与命令行接口。
2. **串联 Agentic 流程**：补齐引用输出与评估脚本，确保通过 KR 测试。
3. **上线前端 UI**：打通 Web 界面与后端，完成端到端验收。
