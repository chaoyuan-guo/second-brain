# å°½é‡å‡å°‘æ¶æ„è½¯ä»¶çš„ä¼ æ’­

## ğŸ§‘â€ğŸ’» User

ç»§ç»­è®²è§£åŠ›æ‰£é¢˜ç›®924. å°½é‡å‡å°‘æ¶æ„è½¯ä»¶çš„ä¼ æ’­

---
## ğŸ¤– Assistant

é¢˜ç›®å¤§æ„å…ˆè¯´æ¸…æ¥šï¼š

- ç»™ä½ ä¸€ä¸ªæ— å‘å›¾ï¼Œ`graph[i][j] == 1` è¡¨ç¤ºæœ‰è¾¹ã€‚
- `initial` æ˜¯ä¸€ç»„â€œæœ€å¼€å§‹å°±æ„ŸæŸ“â€çš„èŠ‚ç‚¹ï¼Œç—…æ¯’ä¼šä»è¿™äº›ç‚¹å‡ºå‘ï¼Œåœ¨å›¾é‡Œä¼ æ’­ï¼ˆå¯ä»¥æ„ŸæŸ“ä»»æ„è¿é€šå—ä¸­çš„æ‰€æœ‰ç‚¹ï¼‰ã€‚
- ä½ å¯ä»¥ä» `initial` é‡Œ**åˆ æ‰ä¸€ä¸ªç‚¹**ï¼ˆç›¸å½“äºå®ƒä¸€å¼€å§‹å°±ä¸æ„ŸæŸ“ï¼‰ï¼Œé—®åˆ å“ªä¸ªï¼Œèƒ½è®©æœ€ç»ˆè¢«æ„ŸæŸ“çš„èŠ‚ç‚¹æ•°**æœ€å°‘**ï¼›å¦‚æœç»“æœä¸€æ ·ï¼Œè¿”å›ä¸‹æ ‡æœ€å°çš„é‚£ä¸ªç‚¹ã€‚

---

## æ ¸å¿ƒæ€è·¯ï¼š**è¿é€šåˆ†é‡ + è®¡æ•° + è´ªå¿ƒ**

**ä¸€å¥è¯æœ¬è´¨**ï¼š
å›¾æ˜¯æ— å‘å›¾ï¼Œä¼ æ’­åªåœ¨è¿é€šåˆ†é‡å†…éƒ¨è¿›è¡Œã€‚æˆ‘ä»¬åªéœ€è¦çœ‹æ¯ä¸ªè¿é€šåˆ†é‡é‡Œï¼Œä¸€å¼€å§‹æœ‰å‡ ä¸ªæ„ŸæŸ“æºã€‚

å…³é”®è§‚å¯Ÿï¼š

1. **å›¾çš„è¿é€šåˆ†é‡ä¹‹é—´äº’ä¸å½±å“**ï¼š
ä¸€ä¸ªè¿é€šå—é‡Œçš„æ„ŸæŸ“ï¼Œä¸ä¼šè·‘åˆ°å¦ä¸€ä¸ªè¿é€šå—å»ã€‚
2. å¯¹äºæŸä¸ªè¿é€šåˆ†é‡ï¼š
 - å¦‚æœè¿™ä¸ªåˆ†é‡é‡Œæœ‰ **â‰¥ 2 ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹**ï¼š
 å³ä½¿ä½ åˆ æ‰å…¶ä¸­ä¸€ä¸ªï¼Œå…¶ä»–çš„è¿˜åœ¨ï¼Œæ•´ä¸ªåˆ†é‡è¿˜æ˜¯ä¼šå…¨çƒ‚ â†’ åˆ è°éƒ½æ²¡ç”¨ã€‚
 - å¦‚æœè¿™ä¸ªåˆ†é‡é‡Œ **åªæœ‰ 1 ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹**ï¼š
 å¦‚æœä½ åˆ æ‰è¿™ä¸ªç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿é€šå—æ•´ä¸ªå°±ä¸ä¼šè¢«æ„ŸæŸ“ï¼Œå¯ä»¥â€œæ‹¯æ•‘â€è¿™ä¸ªåˆ†é‡çš„æ‰€æœ‰èŠ‚ç‚¹æ•°ã€‚

**æ‰€ä»¥ç­–ç•¥æ˜¯**ï¼š

- æŠŠå›¾æŒ‰è¿é€šåˆ†é‡ï¼ˆcomponentï¼‰åˆ’åˆ†å‡ºæ¥ï¼š
 - ç»Ÿè®¡æ¯ä¸ªåˆ†é‡çš„å¤§å° `size[comp_id]`ã€‚
- ç»Ÿè®¡æ¯ä¸ªåˆ†é‡ä¸­ï¼Œåˆå§‹æ„ŸæŸ“ç‚¹çš„ä¸ªæ•° `infect_cnt[comp_id]`ã€‚
- å¯¹ `initial` ä¸­çš„æ¯ä¸ªç‚¹ `u`ï¼š
 - çœ‹å®ƒæ‰€åœ¨åˆ†é‡ `comp = color[u]`ï¼š
 - å¦‚æœ `infect_cnt[comp] == 1`ï¼Œè¯´æ˜åˆ æ‰ `u` å¯ä»¥æ‹¯æ•‘ `size[comp]` ä¸ªç‚¹ã€‚
- é€‰æ‹©â€œ**èƒ½æ‹¯æ•‘èŠ‚ç‚¹æ•°æœ€å¤§**â€çš„é‚£ä¸ªåˆå§‹ç‚¹ï¼›
 - å¦‚æœæ‹¯æ•‘æ•°ç›¸åŒï¼Œå–ä¸‹æ ‡æœ€å°çš„ã€‚
- å¦‚æœ**æ‰€æœ‰åˆ†é‡çš„åˆå§‹æ„ŸæŸ“æ•°éƒ½ â‰¥ 2**ï¼Œè¯´æ˜åˆ è°éƒ½æ²¡æ³•æ‹¯æ•‘ä»»ä½•èŠ‚ç‚¹ â†’ æŒ‰é¢˜æ„è¿”å› `initial` é‡Œæœ€å°çš„ä¸‹æ ‡ã€‚

---

## ç®—æ³•æ­¥éª¤ï¼ˆæ¡†æ¶åŒ–ï¼‰

1. **æ‰¾è¿é€šåˆ†é‡**ï¼š
 - ç”¨ DFS / BFS ä»æ¯ä¸ªæœªè®¿é—®èŠ‚ç‚¹å‡ºå‘ï¼Œ
 - ç»™æ¯ä¸ªèŠ‚ç‚¹ä¸€ä¸ªåˆ†é‡ç¼–å· `color[i] = comp_id`ï¼Œ
 - åŒæ—¶ç»Ÿè®¡æ¯ä¸ªåˆ†é‡èŠ‚ç‚¹æ•° `size[comp_id]`ã€‚
2. **ç»Ÿè®¡å„åˆ†é‡çš„åˆå§‹æ„ŸæŸ“æ•°é‡**ï¼š
 - éå† `initial`ï¼š
 - `infect_cnt[color[u]] += 1`ã€‚
3. **åœ¨æ‰€æœ‰å€™é€‰èŠ‚ç‚¹ä¸­é€‰æœ€ä¼˜**ï¼š
 - æŠŠ `initial` æ’åºï¼ˆä¿è¯ tie-break ç”¨æœ€å°ä¸‹æ ‡ï¼‰ã€‚
 - éå†æ’åºåçš„ `initial`ï¼š
 - å¦‚æœ `infect_cnt[color[u]] == 1`ï¼š
 - `saved = size[color[u]]`ï¼Œå¦‚æœ `saved` æ¯”å½“å‰æœ€ä½³å¤§ï¼Œå°±æ›¿æ¢ç­”æ¡ˆï¼›
 - è‹¥ `saved` ä¸€æ ·å¤§ï¼Œä¸å¿…æ›´æ–°ï¼ˆå› ä¸ºå·²ç»æŒ‰ä¸‹æ ‡æ’åºï¼Œå¯ä¿ç•™æ›´å°ä¸‹æ ‡ï¼‰ã€‚
 - å¦‚æœæ²¡æœ‰ä»»ä½•èŠ‚ç‚¹æ»¡è¶³ `infect_cnt[color[u]] == 1`ï¼Œç›´æ¥è¿”å› `min(initial)`ã€‚
 - å¦åˆ™è¿”å›è®°å½•ä¸‹æ¥çš„æœ€ä½³èŠ‚ç‚¹ã€‚

---

## æ—¶é—´ & ç©ºé—´å¤æ‚åº¦

- é‚»æ¥çŸ©é˜µå¤§å°æ˜¯ `n * n`ï¼š
 - æ‰¾è¿é€šåˆ†é‡ï¼š`O(n^2)`ï¼ˆæ¯ä¸ªèŠ‚ç‚¹ DFS/BFS æ—¶æœ€å¤šæ‰«ä¸€è¡Œ/ä¸€åˆ—ï¼‰ã€‚
 - ç»Ÿè®¡ä¸éå† `initial`ï¼š`O(n log n)`ï¼ˆæ’åºï¼‰ + `O(n)`ã€‚
- æ€»ä½“ï¼š**æ—¶é—´å¤æ‚åº¦ `O(n^2)`ï¼Œç©ºé—´å¤æ‚åº¦ `O(n)`**ã€‚

---

## é¢è¯•å£è¿°ç‰ˆï¼ˆ30 ç§’ï¼‰

> è¿™é¢˜çš„å…³é”®æ˜¯æŒ‰è¿é€šåˆ†é‡æ¥æ€è€ƒã€‚
> æ— å‘å›¾é‡Œç—…æ¯’åªåœ¨è¿é€šåˆ†é‡å†…éƒ¨ä¼ æ’­ï¼Œæ‰€ä»¥æˆ‘å…ˆç”¨ DFS æŠŠå›¾åˆ†æˆå¤šä¸ªè¿é€šåˆ†é‡ï¼Œå¹¶è®°å½•æ¯ä¸ªåˆ†é‡çš„å¤§å°ã€‚
> ç„¶åæˆ‘ç»Ÿè®¡æ¯ä¸ªåˆ†é‡é‡Œåˆå§‹æ„ŸæŸ“ç‚¹çš„æ•°é‡ï¼š
> å¦‚æœä¸€ä¸ªåˆ†é‡é‡Œæœ‰è‡³å°‘ä¸¤ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹ï¼Œä¸ç®¡åˆ æ‰å“ªä¸ªï¼Œè¿™ä¸ªåˆ†é‡éƒ½ä¼šè¢«å®Œå…¨æ„ŸæŸ“ï¼›
> å¦‚æœæŸä¸ªåˆ†é‡é‡Œåªæœ‰ä¸€ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹ï¼Œé‚£ä¹ˆåˆ æ‰è¿™ä¸ªç‚¹å°±å¯ä»¥æ‹¯æ•‘æ•´ä¸ªåˆ†é‡çš„èŠ‚ç‚¹æ•°ã€‚
> æœ€ååœ¨æ‰€æœ‰åˆå§‹ç‚¹ä¸­ï¼ŒæŒ‘é€‰èƒ½æ‹¯æ•‘èŠ‚ç‚¹æ•°æœ€å¤šçš„é‚£ä¸ªï¼Œè‹¥æœ‰å¹¶åˆ—å°±å–ç¼–å·æœ€å°çš„ã€‚
> å¦‚æœæ²¡æœ‰ä»»ä½•ç‚¹èƒ½æ‹¯æ•‘èŠ‚ç‚¹ï¼ˆæ‰€æœ‰åˆ†é‡éƒ½æœ‰è‡³å°‘ä¸¤ä¸ªæ„ŸæŸ“ç‚¹ï¼‰ï¼Œå°±ç›´æ¥è¿”å› initial é‡Œæœ€å°çš„ç¼–å·ã€‚
> æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^2)ã€‚

---

## ä»£ç å®ç°ï¼ˆPythonï¼ŒDFS + Google Styleï¼‰

```python
from typing import List


class Solution:
    """åŠ›æ‰£ 924. å°½é‡å‡å°‘æ¶æ„è½¯ä»¶çš„ä¼ æ’­é¢˜è§£."""

    def minMalwareSpread(self, graph: List[List[int]], initial: List[int]) -> int:
        """è¿”å›åº”è¯¥åˆ é™¤çš„åˆå§‹æ„ŸæŸ“ç‚¹ç¼–å·.

        æ€è·¯ï¼š
        1. ç”¨ DFS æ‰¾å‡ºå›¾çš„æ‰€æœ‰è¿é€šåˆ†é‡ï¼Œå¹¶è®°å½•æ¯ä¸ªåˆ†é‡å¤§å°ã€‚
        2. ç»Ÿè®¡æ¯ä¸ªè¿é€šåˆ†é‡ä¸­ï¼Œåˆå§‹æ„ŸæŸ“ç‚¹çš„æ•°é‡ã€‚
        3. å¯¹ initial ä¸­çš„æ¯ä¸ªç‚¹ï¼Œå¦‚æœå®ƒæ‰€åœ¨åˆ†é‡åªåŒ…å«è¿™ä¸€ä¸ªåˆå§‹ç‚¹ï¼Œ
           åˆ æ‰å®ƒå°±èƒ½æ‹¯æ•‘æ•´ä¸ªåˆ†é‡çš„èŠ‚ç‚¹æ•°ï¼›é€‰èƒ½æ‹¯æ•‘æœ€å¤šèŠ‚ç‚¹çš„é‚£ä¸ªç‚¹ã€‚
        4. è‹¥æ²¡æœ‰è¿™æ ·çš„ç‚¹ï¼Œå°±è¿”å› initial ä¸­ç¼–å·æœ€å°çš„é‚£ä¸ªã€‚

        Args:
            graph: é‚»æ¥çŸ©é˜µå½¢å¼çš„æ— å‘å›¾ï¼Œgraph[i][j] == 1 è¡¨ç¤ºæœ‰è¾¹ã€‚
            initial: åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹ç¼–å·åˆ—è¡¨ã€‚

        Returns:
            int: è¦åˆ é™¤çš„åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹ç¼–å·ã€‚
        """
        n = len(graph)
        # color[i] è¡¨ç¤ºèŠ‚ç‚¹ i æ‰€åœ¨è¿é€šåˆ†é‡çš„ç¼–å·ï¼Œåˆå§‹ä¸º -1 è¡¨ç¤ºæœªæŸ“è‰²
        color = [-1] * n
        comp_count = 0  # è¿é€šåˆ†é‡ä¸ªæ•°

        def dfs(node: int, c: int) -> int:
            """DFS æŸ“è‰²ï¼Œè¿”å›å½“å‰è¿é€šåˆ†é‡çš„å¤§å°."""
            stack = [node]
            color[node] = c
            size = 0
            while stack:
                u = stack.pop()
                size += 1
                # éå†æ‰€æœ‰å¯èƒ½çš„é‚»å±…
                for v in range(n):
                    if graph[u][v] == 1 and color[v] == -1:
                        color[v] = c
                        stack.append(v)
            return size

        # 1. æ‰¾å‡ºæ‰€æœ‰è¿é€šåˆ†é‡ï¼Œå¹¶è®°å½•æ¯ä¸ªåˆ†é‡çš„å¤§å°
        comp_sizes = []
        for i in range(n):
            if color[i] == -1:
                size = dfs(i, comp_count)
                comp_sizes.append(size)
                comp_count += 1

        # 2. ç»Ÿè®¡æ¯ä¸ªè¿é€šåˆ†é‡ä¸­ï¼Œåˆå§‹æ„ŸæŸ“ç‚¹çš„æ•°é‡
        infect_cnt = [0] * comp_count
        for node in initial:
            c = color[node]
            infect_cnt[c] += 1

        # 3. åœ¨ initial ä¸­æ‰¾æœ€ä¼˜åˆ é™¤ç‚¹
        initial.sort()  # ä¸º tie-breakï¼ˆä¸‹æ ‡æ›´å°ï¼‰åšå‡†å¤‡
        best_node = initial[0]
        best_saved = -1  # èƒ½æ‹¯æ•‘çš„æœ€å¤§èŠ‚ç‚¹æ•°

        for node in initial:
            c = color[node]
            # åªæœ‰å½“è¿™ä¸ªåˆ†é‡é‡Œæ°å¥½åªæœ‰ä¸€ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹æ—¶ï¼Œåˆ æ‰è¯¥ç‚¹æ‰æœ‰ç”¨
            if infect_cnt[c] == 1:
                saved = comp_sizes[c]
                if saved > best_saved:
                    best_saved = saved
                    best_node = node
                # å¦‚æœ saved == best_savedï¼Œå› ä¸º initial å·²æ’åºï¼Œ
                # ä¿ç•™ä¹‹å‰çš„ best_nodeï¼ˆç¼–å·æ›´å°ï¼‰å³å¯

        # å¦‚æœ best_saved ä»ä¸º -1ï¼Œè¯´æ˜åˆ è°éƒ½ä¸èƒ½å‡å°‘æ„ŸæŸ“èŠ‚ç‚¹æ•°ï¼Œè¿”å›æœ€å°ç¼–å·
        return best_node
```

---

### è¿™é¢˜èƒŒåçš„â€œæ€ç»´æ¨¡å¼â€

- ä»â€œèŠ‚ç‚¹è§†è§’â€åˆ‡æ¢åˆ°â€œ**è¿é€šåˆ†é‡è§†è§’**â€ï¼š
ä¸€æ—¦æ˜¯å›¾ + ä¼ æ’­/è¿é€šæ€§é—®é¢˜ï¼Œä¼˜å…ˆè€ƒè™‘æ˜¯å¦å¯ä»¥æŒ‰è¿é€šåˆ†é‡æ‹†åˆ†ã€‚
- åšæ³•æ˜¯ï¼š**åˆ†è§£é—®é¢˜ â†’ å¯¹æ¯ä¸ªå­ç»“æ„åšå±€éƒ¨å†³ç­– â†’ å†å…¨å±€è´ªå¿ƒé€‰æ‹©**ã€‚
- ç±»ä¼¼é¢˜å‹ä½ å¯ä»¥å½’ç±»ä¸ºï¼š
> â€œå›¾ + ç»„ä»¶ç»Ÿè®¡ + è´ªå¿ƒé€‰æ‹©æŸä¸ªèŠ‚ç‚¹ / è¾¹â€

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€é¢˜å¯ä»¥æ¥ç€åš 928ï¼ˆè¿™é¢˜æ˜¯ 924 çš„åŠ å¼ºç‰ˆï¼Œæ€è·¯æœ‰å»¶ç»­æ€§ï¼‰ï¼Œåˆ·å®Œè¿™ä¸¤é¢˜ä½ å¯¹â€œå›¾ + ç—…æ¯’ä¼ æ’­ + ç»„ä»¶æ€ç»´â€è¿™ä¸€å—å°±æ¯”è¾ƒæˆä½“ç³»äº†ã€‚

---
## ğŸ¤– Assistant

å¥½çš„ï¼Œè¿™é“é¢˜æ¯”ä¸Šä¸€é¢˜éš¾åº¦å¤§ä¸€äº›ï¼Œå®ƒè€ƒå¯Ÿçš„æ˜¯å¯¹å›¾çš„ç†è§£ä»¥åŠ**è¿é€šåˆ†é‡**çš„åˆ†æï¼Œéå¸¸ç»å…¸ã€‚æˆ‘ä»¬ä»ç„¶ç”¨æœ€ç›´æ¥çš„æ€è·¯æ¥è§£å†³ã€‚

**é¢˜ç›®å¤§æ„ï¼š**
åœ¨ä¸€ä¸ªç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆçš„ç½‘ç»œä¸­ï¼Œ`graph` æ˜¯ä¸€ä¸ªé‚»æ¥çŸ©é˜µã€‚`initial` åˆ—è¡¨é‡Œæ˜¯ä¸€äº›åˆå§‹è¢«ç—…æ¯’æ„ŸæŸ“çš„èŠ‚ç‚¹ã€‚ç—…æ¯’ä¼šä¼ æ’­åˆ°æ‰€æœ‰ç›´æ¥æˆ–é—´æ¥ç›¸è¿çš„èŠ‚ç‚¹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç§»é™¤ `initial` é‡Œçš„**ä¸€ä¸ª**èŠ‚ç‚¹ï¼Œé—®ç§»é™¤å“ªä¸€ä¸ªèŠ‚ç‚¹èƒ½ä½¿å¾—æœ€ç»ˆè¢«æ„ŸæŸ“çš„æ€»èŠ‚ç‚¹æ•°æœ€å°‘ã€‚å¦‚æœæœ‰å¤šä¸ªé€‰æ‹©ï¼Œè¿”å›ç´¢å¼•æœ€å°çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚

---

## æ ¸å¿ƒæ€è·¯ï¼ˆæœ¬é¢˜å°±æ˜¯è€ƒå¯Ÿã€Œè¿é€šåˆ†é‡ã€ï¼‰

**ä¸€å¥è¯æœ¬è´¨ï¼š**
æ‰¾åˆ°**åªè¢«ä¸€ä¸ªç—…æ¯’æºæ±¡æŸ“çš„ã€ä¸”èŠ‚ç‚¹æ•°æœ€å¤š**çš„é‚£ä¸ªè¿é€šåˆ†é‡ï¼Œç„¶åç§»é™¤é‚£ä¸ªå”¯ä¸€çš„ç—…æ¯’æºã€‚

### ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿ

æˆ‘ä»¬æŠŠæ•´ä¸ªå›¾æƒ³è±¡æˆç”±å‡ ä¸ªäº’ä¸ç›¸è¿çš„â€œå²›å±¿â€ï¼ˆè¿é€šåˆ†é‡ï¼‰ç»„æˆã€‚ç—…æ¯’çš„ä¼ æ’­åªä¼šé™åˆ¶åœ¨ä¸€ä¸ªå²›å±¿å†…ã€‚

åˆ†æä¸€ä¸ªå²›å±¿ï¼ˆè¿é€šåˆ†é‡ï¼‰çš„å‘½è¿ï¼š
- **æƒ…å†µ 1ï¼šå²›å±¿ä¸Šæ²¡æœ‰ç—…æ¯’æºã€‚** -> è¿™ä¸ªå²›å±¿å®‰å…¨ï¼Œæœ€ç»ˆæ„ŸæŸ“æ•°ä¸º 0ã€‚
- **æƒ…å†µ 2ï¼šå²›å±¿ä¸Šæœ‰ 1 ä¸ªç—…æ¯’æºã€‚** -> å¦‚æœæˆ‘ä»¬ç§»é™¤è¿™**å”¯ä¸€**çš„ç—…æ¯’æºï¼Œæ•´ä¸ªå²›å±¿å°±å¾—æ•‘äº†ï¼æˆ‘ä»¬èƒ½â€œæ‹¯æ•‘â€çš„èŠ‚ç‚¹æ•°å°±æ˜¯è¿™ä¸ªå²›å±¿çš„å¤§å°ã€‚è¿™æ˜¯æˆ‘ä»¬çš„æœ€ä½³æœºä¼šã€‚
- **æƒ…å†µ 3ï¼šå²›å±¿ä¸Šæœ‰ 2 ä¸ªæˆ–æ›´å¤šç—…æ¯’æºã€‚** -> æ¯”å¦‚æœ‰ A å’Œ B ä¸¤ä¸ªç—…æ¯’æºã€‚å¦‚æœæˆ‘ä»¬ç§»é™¤äº† Aï¼Œç—…æ¯’è¿˜ä¼šä» B ä¼ æ’­ï¼Œæ•´ä¸ªå²›å±¿è¿˜æ˜¯ä¼šå…¨éƒ¨æ„ŸæŸ“ã€‚æ‰€ä»¥ç§»é™¤ A åœ¨è¿™ä¸ªå²›å±¿ä¸Šæ¯«æ— æ„ä¹‰ï¼Œæ‹¯æ•‘çš„èŠ‚ç‚¹æ•°ä¸º 0ã€‚

**ç»“è®ºï¼š** æˆ‘ä»¬çš„æœ€ä¼˜ç­–ç•¥ï¼Œå°±æ˜¯å»å¯»æ‰¾å±äº â€œæƒ…å†µ 2â€ çš„ç—…æ¯’æºï¼Œå¹¶ä¸”å¸Œæœ›å®ƒæ‰€åœ¨çš„å²›å±¿ï¼ˆè¿é€šåˆ†é‡ï¼‰å°½å¯èƒ½å¤§ã€‚

### ç®—æ³•æ­¥éª¤

1. **è¯†åˆ«å²›å±¿ (è¿é€šåˆ†é‡)**ï¼šæœ€é€‚åˆå¤„ç†è¿™ç±»é—®é¢˜çš„å·¥å…·æ˜¯**å¹¶æŸ¥é›† (Union-Find)**ã€‚
 - éå†é‚»æ¥çŸ©é˜µ `graph`ï¼Œå¦‚æœ `graph[i][j] == 1`ï¼Œå°±æŠŠ `i` å’Œ `j` åˆå¹¶ (`union`) åˆ°ä¸€ä¸ªé›†åˆé‡Œã€‚
2. **ç»Ÿè®¡æ¯ä¸ªå²›å±¿çš„ä¿¡æ¯**ï¼š
 - å»ºç«‹å¹¶æŸ¥é›†åï¼Œæ¯ä¸ªå²›å±¿éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„â€œä»£è¡¨èŠ‚ç‚¹â€ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ã€‚
 - ç»Ÿè®¡æ¯ä¸ªå²›å±¿çš„å¤§å°ï¼ˆèŠ‚ç‚¹æ€»æ•°ï¼‰ã€‚
 - ç»Ÿè®¡æ¯ä¸ªå²›å±¿ä¸Šæœ‰å¤šå°‘ä¸ªåˆå§‹ç—…æ¯’æºã€‚
3. **å†³ç­–ï¼šç§»é™¤å“ªä¸ªç—…æ¯’æº**ï¼š
 - éå† `initial` åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªç—…æ¯’æº `u`ã€‚
 - æ‰¾åˆ° `u` æ‰€åœ¨çš„å²›å±¿ã€‚
 - æ£€æŸ¥è¿™ä¸ªå²›å±¿æ˜¯ä¸æ˜¯åªæœ‰ `u` è¿™ä¸€ä¸ªç—…æ¯’æºï¼ˆå³å±äºâ€œæƒ…å†µ 2â€ï¼‰ã€‚
 - å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆç§»é™¤ `u` èƒ½æ‹¯æ•‘çš„èŠ‚ç‚¹æ•°å°±æ˜¯è¿™ä¸ªå²›å±¿çš„å¤§å°ã€‚æˆ‘ä»¬è®°å½•ä¸‹è¿™ä¸ªâ€œæ‹¯æ•‘æ•°â€å’Œå½“å‰çš„èŠ‚ç‚¹ `u`ã€‚
 - å¦‚æœä¸æ˜¯ï¼ˆå±äºâ€œæƒ…å†µ 3â€ï¼‰ï¼Œç§»é™¤ `u` èƒ½æ‹¯æ•‘çš„èŠ‚ç‚¹æ•°æ˜¯ 0ã€‚
4. **é€‰å‡ºæœ€ä¼˜è§£**ï¼š
 - åœ¨æ‰€æœ‰å€™é€‰è€…ä¸­ï¼Œæ‰¾åˆ°é‚£ä¸ªèƒ½æ‹¯æ•‘æœ€å¤šèŠ‚ç‚¹çš„äººã€‚
 - å¦‚æœæ‹¯æ•‘çš„èŠ‚ç‚¹æ•°ä¸€æ ·å¤šï¼Œæ ¹æ®é¢˜æ„ï¼Œé€‰æ‹©ç´¢å¼•æœ€å°çš„é‚£ä¸ªã€‚

### ä¸ºä»€ä¹ˆç”¨å¹¶æŸ¥é›† (Union-Find)ï¼Ÿ

- **å¹¶æŸ¥é›†æ˜¯è§£å†³å›¾è¿é€šæ€§é—®é¢˜çš„æ ‡å‡†ã€é«˜æ•ˆçš„å·¥å…·ã€‚** å®ƒçš„æ ¸å¿ƒåŠŸèƒ½å°±æ˜¯ï¼š
 1. `find(i)`: å¿«é€ŸæŸ¥æ‰¾èŠ‚ç‚¹ `i` å±äºå“ªä¸ªé›†åˆï¼ˆå“ªä¸ªå²›å±¿ï¼‰ã€‚
 2. `union(i, j)`: å¿«é€Ÿåˆå¹¶ `i` å’Œ `j` æ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆã€‚
- æ¯”èµ· DFS/BFSï¼Œå¹¶æŸ¥é›†åœ¨å¤„ç†è¿™ç±»â€œåˆ†å—â€ã€â€œåˆ†ç»„â€é—®é¢˜æ—¶ï¼Œä»£ç ç»“æ„æ›´æ¸…æ™°ã€‚

### æ—¶é—´ & ç©ºé—´å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ï¼š`O(N^2 * Î±(N))`ï¼Œå…¶ä¸­ `N` æ˜¯èŠ‚ç‚¹æ•°ã€‚`N^2` æ˜¯éå†é‚»æ¥çŸ©é˜µçš„æ—¶é—´ï¼Œ`Î±(N)` æ˜¯å¹¶æŸ¥é›†å•æ¬¡æ“ä½œçš„æ¥è¿‘äºå¸¸æ•°çš„æ—¶é—´ã€‚é¢è¯•ä¸­å¯ä»¥ç›´æ¥è¯´ `O(N^2)`ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š`O(N)`ï¼Œç”¨äºå­˜å‚¨å¹¶æŸ¥é›†çš„ `parent` æ•°ç»„å’Œç»Ÿè®¡ä¿¡æ¯ã€‚

---

## é¢è¯•å£è¿°ç‰ˆï¼ˆ30 ç§’å·¦å³ï¼‰

> è¿™é“é¢˜æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…³äºå›¾çš„è¿é€šåˆ†é‡åˆ†æé—®é¢˜ã€‚
> æˆ‘çš„æ€è·¯æ˜¯ï¼Œå…ˆç”¨**å¹¶æŸ¥é›†**æŠŠå›¾ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹åˆ’åˆ†æˆä¸åŒçš„è¿é€šåˆ†é‡ï¼ŒåŒæ—¶ç»Ÿè®¡å‡ºæ¯ä¸ªåˆ†é‡çš„å¤§å°ã€‚
> ç„¶åï¼Œæˆ‘å†ç»Ÿè®¡æ¯ä¸ªåˆ†é‡é‡Œï¼Œæœ‰å¤šå°‘ä¸ªåˆå§‹çš„ç—…æ¯’æºã€‚
> ä¸€ä¸ªç—…æ¯’æºåªæœ‰åœ¨å®ƒæ˜¯**å…¶æ‰€åœ¨åˆ†é‡çš„å”¯ä¸€æ„ŸæŸ“æº**æ—¶ï¼Œç§»é™¤å®ƒæ‰æœ‰æ„ä¹‰ï¼Œè¿™æ—¶å¯ä»¥æ‹¯æ•‘æ•´ä¸ªåˆ†é‡ã€‚å¦‚æœä¸€ä¸ªåˆ†é‡æœ‰å¤šä¸ªæ„ŸæŸ“æºï¼Œç§»é™¤å…¶ä¸­ä»»ä½•ä¸€ä¸ªéƒ½æ— æ³•é˜»æ­¢ä¼ æ’­ã€‚
> æ‰€ä»¥ï¼Œæˆ‘æœ€åä¼šéå†æ‰€æœ‰åˆå§‹ç—…æ¯’æºï¼Œæ‰¾åˆ°é‚£ä¸ªâ€œå”¯ä¸€æ„ŸæŸ“æºâ€ï¼Œä¸”å…¶æ‰€åœ¨åˆ†é‡æœ€å¤§çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯ç­”æ¡ˆã€‚å¦‚æœæ‹¯æ•‘æ•°é‡ç›¸åŒï¼Œå°±é€‰ç´¢å¼•æœ€å°çš„ã€‚

---

## ä»£ç å®ç°ï¼ˆPython, Google Styleï¼‰

```python
from collections import Counter
from typing import List


class UnionFind:
    """å¹¶æŸ¥é›†æ•°æ®ç»“æ„ï¼Œç”¨äºå¤„ç†è¿é€šåˆ†é‡."""

    def __init__(self, n: int):
        """åˆå§‹åŒ– n ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹è‡ªæˆä¸€ä¸ªé›†åˆ."""
        self.parent = list(range(n))
        # size æ•°ç»„ç”¨äºè®°å½•æ¯ä¸ªè¿é€šåˆ†é‡çš„å¤§å°
        self.size = [1] * n

    def find(self, i: int) -> int:
        """æŸ¥æ‰¾èŠ‚ç‚¹ i çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶è¿›è¡Œè·¯å¾„å‹ç¼©."""
        if self.parent[i] == i:
            return i
        self.parent[i] = self.find(self.parent[i])
        return self.parent[i]

    def union(self, i: int, j: int):
        """åˆå¹¶èŠ‚ç‚¹ i å’Œ j æ‰€åœ¨çš„é›†åˆ."""
        root_i = self.find(i)
        root_j = self.find(j)
        if root_i != root_j:
            # æŒ‰å¤§å°åˆå¹¶ï¼Œå°æ ‘åˆå¹¶åˆ°å¤§æ ‘ä¸Š
            if self.size[root_i] < self.size[root_j]:
                root_i, root_j = root_j, root_i
            self.parent[root_j] = root_i
            self.size[root_i] += self.size[root_j]


class Solution:
    """åŠ›æ‰£ 924. å°½é‡å‡å°‘æ¶æ„è½¯ä»¶çš„ä¼ æ’­ é¢˜è§£."""

    def minMalwareSpread(
        self, graph: List[List[int]], initial: List[int]
    ) -> int:
        """
        é€šè¿‡ç§»é™¤ä¸€ä¸ªåˆå§‹æ„ŸæŸ“èŠ‚ç‚¹ï¼Œä½¿å¾—æœ€ç»ˆæ„ŸæŸ“æ€»æ•°æœ€å°‘.

        Args:
            graph: é‚»æ¥çŸ©é˜µè¡¨ç¤ºçš„å›¾.
            initial: åˆå§‹æ„ŸæŸ“çš„èŠ‚ç‚¹åˆ—è¡¨.

        Returns:
            int: åº”è¯¥è¢«ç§»é™¤çš„èŠ‚ç‚¹.
        """
        n = len(graph)
        uf = UnionFind(n)

        # 1. æ„å»ºå¹¶æŸ¥é›†ï¼Œè¯†åˆ«æ‰€æœ‰è¿é€šåˆ†é‡
        for i in range(n):
            for j in range(i + 1, n):
                if graph[i][j] == 1:
                    uf.union(i, j)

        # 2. ç»Ÿè®¡æ¯ä¸ªè¿é€šåˆ†é‡ä¸­çš„åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹æ•°é‡
        # component_initial_count[æ ¹èŠ‚ç‚¹] = æ„ŸæŸ“èŠ‚ç‚¹æ•°
        component_initial_count = Counter(uf.find(i) for i in initial)

        max_saved_count = -1
        result_node = min(initial)  # é»˜è®¤ç»“æœä¸º initial ä¸­æœ€å°çš„èŠ‚ç‚¹

        # 3. éå†åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹ï¼Œå†³ç­–ç§»é™¤å“ªä¸€ä¸ª
        for node in initial:
            root = uf.find(node)
            # å¦‚æœ node æ˜¯å…¶æ‰€åœ¨åˆ†é‡çš„å”¯ä¸€æ„ŸæŸ“æº
            if component_initial_count[root] == 1:
                # æ‹¯æ•‘çš„èŠ‚ç‚¹æ•°å°±æ˜¯è¯¥åˆ†é‡çš„å¤§å°
                saved_count = uf.size[root]
                # å¦‚æœæ‹¯æ•‘çš„èŠ‚ç‚¹æ›´å¤šï¼Œæ›´æ–°ç»“æœ
                if saved_count > max_saved_count:
                    max_saved_count = saved_count
                    result_node = node
                # å¦‚æœæ‹¯æ•‘æ•°ç›¸åŒï¼Œé€‰æ‹©ç´¢å¼•æ›´å°çš„èŠ‚ç‚¹
                elif saved_count == max_saved_count and node < result_node:
                    result_node = node

        return result_node
```

---
## ğŸ§‘â€ğŸ’» User

èƒ½ç”¨ BFS è§£å†³å—

---
## ğŸ¤– Assistant

å¯ä»¥ï¼Œç”¨ BFS å®Œå…¨èƒ½åšï¼Œè€Œä¸”æ€è·¯å’Œæˆ‘åˆšæ‰ç”¨ DFS çš„ç‰ˆæœ¬**ä¸€æ¨¡ä¸€æ ·**ï¼Œåªæ˜¯â€œæ€ä¹ˆåˆ’åˆ†è¿é€šåˆ†é‡â€è¿™ä¸€æ­¥ä» DFS æ¢æˆäº† BFS è€Œå·²ã€‚

---

## æ€è·¯æœ‰æ²¡æœ‰å˜ï¼Ÿ

**æ²¡æœ‰å˜ï¼Œæœ¬è´¨è¿˜æ˜¯è¿™å¥—ï¼š**

1. ç”¨éå†ï¼ˆDFS / BFS éƒ½è¡Œï¼‰æŠŠå›¾åˆ†æˆè‹¥å¹²**è¿é€šåˆ†é‡**ï¼Œè®°å½•ï¼š
 - æ¯ä¸ªèŠ‚ç‚¹å±äºå“ªä¸ªåˆ†é‡ `color[i]`
 - æ¯ä¸ªåˆ†é‡çš„å¤§å° `comp_sizes[comp_id]`
2. ç»Ÿè®¡æ¯ä¸ªåˆ†é‡ä¸­ï¼Œ`initial` é‡Œåˆå§‹æ„ŸæŸ“ç‚¹çš„ä¸ªæ•° `infect_cnt[comp_id]`
3. å¯¹ `initial` ä¸­çš„æ¯ä¸ªç‚¹ `u` çœ‹ï¼š
 - å¦‚æœå®ƒæ‰€åœ¨åˆ†é‡ `comp` é‡Œï¼Œåˆå§‹æ„ŸæŸ“ç‚¹åªæœ‰å®ƒä¸€ä¸ªï¼ˆ`infect_cnt[comp] == 1`ï¼‰
 - åˆ æ‰å®ƒå¯ä»¥æ‹¯æ•‘ `comp_sizes[comp]` ä¸ªç‚¹
4. é€‰èƒ½æ‹¯æ•‘æœ€å¤šèŠ‚ç‚¹çš„é‚£ä¸ªç‚¹ï¼›å¹¶åˆ—å–ç¼–å·æœ€å°çš„
è‹¥æ‰€æœ‰åˆ†é‡åˆå§‹æ„ŸæŸ“æ•°éƒ½ â‰¥2ï¼Œåˆ è°éƒ½æ²¡ç”¨ â†’ è¿”å› `initial` ä¸­ç¼–å·æœ€å°çš„

**BFS åªæ˜¯ç”¨æ¥â€œæŸ“è‰²æ‰¾è¿é€šåˆ†é‡â€ï¼Œå¯ä»¥å®Œå…¨æ›¿ä»£ DFSã€‚**

---

## é¢è¯•å£è¿°ç‰ˆï¼ˆBFS ç‰ˆæœ¬ï¼Œ30 ç§’ï¼‰

> æˆ‘æŠŠå›¾çœ‹æˆè‹¥å¹²è¿é€šåˆ†é‡ï¼Œç”¨ BFS æŠŠæ¯ä¸ªèŠ‚ç‚¹æŸ“ä¸Šåˆ†é‡ç¼–å·ï¼ŒåŒæ—¶è®°å½•æ¯ä¸ªåˆ†é‡çš„å¤§å°ã€‚
> ç„¶åç»Ÿè®¡æ¯ä¸ªåˆ†é‡é‡Œæœ‰å¤šå°‘ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹ï¼š
> å¦‚æœä¸€ä¸ªåˆ†é‡é‡Œæœ‰è‡³å°‘ä¸¤ä¸ªåˆå§‹ç‚¹ï¼Œæ— è®ºåˆ è°ï¼Œè¿™ä¸ªåˆ†é‡éƒ½ä¼šè¢«å®Œå…¨æ„ŸæŸ“ï¼›
> å¦‚æœæŸä¸ªåˆ†é‡é‡Œåªæœ‰ä¸€ä¸ªåˆå§‹ç‚¹ï¼Œåˆ æ‰å®ƒå°±èƒ½æ‹¯æ•‘è¿™ä¸ªåˆ†é‡é‡Œæ‰€æœ‰èŠ‚ç‚¹ã€‚
> æ¥ç€åœ¨ initial é‡Œæ‰¾ï¼šå“ªä¸ªç‚¹æ‰€åœ¨åˆ†é‡åªæœ‰å®ƒä¸€ä¸ªåˆå§‹ç‚¹ï¼Œå¹¶ä¸”è¿™ä¸ªåˆ†é‡çš„å¤§å°æœ€å¤§ï¼Œå°±åˆ å“ªä¸ªï¼›å¦‚æœæœ‰å¹¶åˆ—å°±é€‰ç¼–å·æœ€å°çš„ã€‚
> å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç‚¹ï¼Œå°±ç›´æ¥è¿”å› initial ä¸­æœ€å°ç¼–å·ã€‚
> æˆ‘ç”¨ BFS åšè¿é€šåˆ†é‡ï¼Œå¤æ‚åº¦æ˜¯ O(n^2)ã€‚

---

## å¤æ‚åº¦

- é‚»æ¥çŸ©é˜µ `n * n`ï¼š
 - BFS æ‰¾æ‰€æœ‰è¿é€šåˆ†é‡ï¼š`O(n^2)`
 - ç»Ÿè®¡ / éå† `initial`ï¼š`O(n log n)`ï¼ˆæ’åºï¼‰+ `O(n)`
- æ€»ä½“ï¼š**æ—¶é—´ `O(n^2)`ï¼Œç©ºé—´ `O(n)`**

---

## ä»£ç å®ç°ï¼ˆBFS ç‰ˆæœ¬ï¼ŒPython + Google Styleï¼‰

```python
from typing import List
from collections import deque


class Solution:
    """åŠ›æ‰£ 924. å°½é‡å‡å°‘æ¶æ„è½¯ä»¶çš„ä¼ æ’­é¢˜è§£ï¼ˆBFS ç‰ˆï¼‰."""

    def minMalwareSpread(self, graph: List[List[int]], initial: List[int]) -> int:
        """è¿”å›åº”è¯¥åˆ é™¤çš„åˆå§‹æ„ŸæŸ“ç‚¹ç¼–å·.

        ä½¿ç”¨ BFS æ‰¾è¿é€šåˆ†é‡ï¼š
        1. BFS æŸ“è‰²æ¯ä¸ªèŠ‚ç‚¹çš„è¿é€šåˆ†é‡ç¼–å·ï¼Œå¹¶ç»Ÿè®¡æ¯ä¸ªåˆ†é‡å¤§å°ã€‚
        2. ç»Ÿè®¡æ¯ä¸ªåˆ†é‡ä¸­çš„åˆå§‹æ„ŸæŸ“ç‚¹æ•°é‡ã€‚
        3. initial æ’åºåï¼Œæšä¸¾æ¯ä¸ªåˆå§‹ç‚¹ï¼š
           è‹¥å…¶æ‰€åœ¨åˆ†é‡ä»…æœ‰è¿™ä¸€ä¸ªåˆå§‹ç‚¹ï¼Œåˆ™åˆ æ‰å®ƒå¯ä»¥æ‹¯æ•‘æ•´ä¸ªåˆ†é‡ã€‚
           é€‰æ‹©èƒ½æ‹¯æ•‘æœ€å¤šèŠ‚ç‚¹æ•°çš„ç‚¹ï¼›å¹¶åˆ—æ—¶å–ç¼–å·æœ€å°ã€‚
        4. è‹¥æ²¡æœ‰ä»»ä½•ç‚¹èƒ½æ‹¯æ•‘èŠ‚ç‚¹ï¼ˆæ‰€æœ‰åˆ†é‡æ„ŸæŸ“ç‚¹æ•°éƒ½ >= 2ï¼‰ï¼Œ
           è¿”å› initial ä¸­ç¼–å·æœ€å°çš„ç‚¹ã€‚

        Args:
            graph: é‚»æ¥çŸ©é˜µå½¢å¼çš„æ— å‘å›¾ï¼Œgraph[i][j] == 1 è¡¨ç¤ºæœ‰è¾¹ã€‚
            initial: åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹çš„ç¼–å·åˆ—è¡¨ã€‚

        Returns:
            int: åº”å½“åˆ é™¤çš„åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹ç¼–å·ã€‚
        """
        n = len(graph)
        # color[i] è¡¨ç¤ºèŠ‚ç‚¹ i æ‰€åœ¨è¿é€šåˆ†é‡ç¼–å·ï¼Œ-1 è¡¨ç¤ºå°šæœªå½’å±ä»»ä½•åˆ†é‡
        color = [-1] * n
        comp_sizes = []  # å„ä¸ªåˆ†é‡çš„å¤§å°
        comp_count = 0   # åˆ†é‡ä¸ªæ•°

        def bfs(start: int, comp_id: int) -> int:
            """ä» start å‡ºå‘ï¼Œç”¨ BFS æŠŠæ•´ä¸ªè¿é€šåˆ†é‡æŸ“æˆ comp_idï¼Œå¹¶è¿”å›è¯¥åˆ†é‡å¤§å°."""
            q = deque([start])
            color[start] = comp_id
            size = 0

            while q:
                u = q.popleft()
                size += 1
                # éå†æ‰€æœ‰å¯èƒ½çš„é‚»å±…
                for v in range(n):
                    # æœ‰è¾¹ä¸”æœªæŸ“è‰²æ‰åŠ å…¥é˜Ÿåˆ—
                    if graph[u][v] == 1 and color[v] == -1:
                        color[v] = comp_id
                        q.append(v)
            return size

        # 1. BFS æ‰¾æ‰€æœ‰è¿é€šåˆ†é‡ï¼Œå¹¶è®°å½•æ¯ä¸ªåˆ†é‡å¤§å°
        for i in range(n):
            if color[i] == -1:
                size = bfs(i, comp_count)
                comp_sizes.append(size)
                comp_count += 1

        # 2. ç»Ÿè®¡æ¯ä¸ªåˆ†é‡ä¸­çš„åˆå§‹æ„ŸæŸ“ç‚¹æ•°é‡
        infect_cnt = [0] * comp_count
        for node in initial:
            comp_id = color[node]
            infect_cnt[comp_id] += 1

        # 3. åœ¨ initial ä¸­æ‰¾æœ€ä½³åˆ é™¤ç‚¹
        initial.sort()  # ç¡®ä¿å¹¶åˆ—æ—¶é€‰ä¸‹æ ‡æ›´å°çš„
        best_node = initial[0]
        best_saved = -1  # å½“å‰èƒ½æ‹¯æ•‘çš„æœ€å¤šèŠ‚ç‚¹æ•°

        for node in initial:
            comp_id = color[node]
            # åªæœ‰å½“è¿™ä¸ªåˆ†é‡é‡Œæ°å¥½åªæœ‰ä¸€ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹æ—¶ï¼Œåˆ æ‰è¯¥ç‚¹æ‰æœ‰ç”¨
            if infect_cnt[comp_id] == 1:
                saved = comp_sizes[comp_id]
                if saved > best_saved:
                    best_saved = saved
                    best_node = node
                # è‹¥ saved == best_savedï¼Œå› ä¸º initial å·²æ’åºï¼Œä¸ç”¨æ›´æ–°ï¼Œ
                # ä¿æŒç¼–å·æ›´å°çš„ best_node å³å¯

        # è‹¥ best_saved ä»ä¸º -1ï¼Œè¯´æ˜åˆ è°éƒ½æ— æ³•å‡å°‘æ„ŸæŸ“èŠ‚ç‚¹æ•°
        return best_node
```

---

### è¿™ä¸€é¢˜ç”¨ BFS çš„â€œæ¡†æ¶æ€ç»´â€

å¯ä»¥æ€»ç»“æˆï¼š

1. **å›¾ + ä¼ æ’­ç±»é—®é¢˜ â†’ å…ˆæƒ³â€œè¿é€šåˆ†é‡è§†è§’â€**
2. â€œè¿é€šåˆ†é‡â€æ€ä¹ˆæ±‚ï¼Ÿâ†’ BFS / DFS / å¹¶æŸ¥é›†éƒ½è¡Œï¼Œåªæ˜¯å®ç°æ–¹å¼ä¸åŒ
3. åœ¨â€œåˆ†é‡çº§åˆ«â€ä¸Šåšè®¡æ•° & è´ªå¿ƒå†³ç­– â†’ é€‰å±€éƒ¨æœ€ä¼˜ç»„æˆå…¨å±€æœ€ä¼˜

ä¹‹åä½ çœ‹åˆ°ç±»ä¼¼ã€Œç—…æ¯’ä¼ æ’­ / å½±å“èŒƒå›´ / è¿é€šå—ã€çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥å…ˆé—®è‡ªå·±ï¼š
> èƒ½ä¸èƒ½å…ˆæŒ‰è¿é€šåˆ†é‡æŠŠå›¾æ‹†å¼€ï¼Œå†åœ¨åˆ†é‡çº§åˆ«åšå†³ç­–ï¼Ÿ

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€é¢˜å¯ä»¥åš 928ï¼ˆæ˜¯ 924 çš„è¿›é˜¶ç‰ˆï¼‰ï¼Œä¼šç»§ç»­ç”¨åˆ°è¿™ç§â€œåˆ†é‡ + ç—…æ¯’ä¼ æ’­ + è´ªå¿ƒâ€çš„å¥—è·¯ã€‚

---
## ğŸ¤– Assistant

å½“ç„¶å¯ä»¥ï¼

å¯¹äºâ€œ**æ‰¾å‡ºå›¾ä¸­æ‰€æœ‰è¿é€šåˆ†é‡**â€è¿™ä¸ªä»»åŠ¡ï¼Œ**BFS å’Œ DFS æ˜¯å®Œå…¨ç­‰ä»·çš„**ï¼Œå¯ä»¥ä»»æ„æ›¿æ¢ã€‚å®ƒä»¬å°±åƒæ˜¯ä¸¤ç§ä¸åŒçš„äº¤é€šå·¥å…·ï¼ˆæ¯”å¦‚æ±½è½¦å’Œè‡ªè¡Œè½¦ï¼‰ï¼Œéƒ½èƒ½æŠŠä½ ä» A ç‚¹å¸¦åˆ° B ç‚¹ï¼Œåªæ˜¯è¡Œè¿›æ–¹å¼ä¸åŒã€‚

---

## æ ¸å¿ƒæ€è·¯ï¼ˆå®Œå…¨ä¸å˜ï¼‰

æ•´ä½“çš„è§£é¢˜æ¡†æ¶å’Œæ€ç»´æ¨¡å¼è·Ÿ DFS ç‰ˆæœ¬**ä¸€æ¨¡ä¸€æ ·**ï¼š

1. **æ‰¾è¿é€šåˆ†é‡**ï¼šéå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹è¿˜æ²¡è¢«â€œæŸ“è‰²â€ï¼ˆè®¿é—®è¿‡ï¼‰ï¼Œå°±ä»å®ƒå¼€å§‹ç”¨ BFS æŠŠå®ƒæ‰€åœ¨çš„æ•´ä¸ªè¿é€šåˆ†é‡éƒ½æ‰¾å‡ºæ¥ï¼Œå¹¶æŸ“ä¸ŠåŒä¸€ç§é¢œè‰²ï¼ˆå³åˆ†é‡ IDï¼‰ã€‚åŒæ—¶ç»Ÿè®¡è¿™ä¸ªåˆ†é‡çš„å¤§å°ã€‚
2. **ç»Ÿè®¡æ„ŸæŸ“æº**ï¼šç»Ÿè®¡æ¯ä¸ªåˆ†é‡é‡Œï¼Œæœ‰å¤šå°‘ä¸ªåˆå§‹æ„ŸæŸ“ç‚¹ã€‚
3. **è´ªå¿ƒå†³ç­–**ï¼šé€‰æ‹©é‚£ä¸ªâ€œèƒ½æ‹¯æ•‘æœ€å¤šèŠ‚ç‚¹â€çš„åˆå§‹æ„ŸæŸ“ç‚¹ã€‚

æˆ‘ä»¬å”¯ä¸€è¦åšçš„ï¼Œå°±æ˜¯æŠŠç¬¬ä¸€æ­¥é‡Œçš„ `dfs` å‡½æ•°ï¼Œæ¢æˆä¸€ä¸ª `bfs` å‡½æ•°ã€‚

---

## BFS å®ç°ç»†èŠ‚

åŸæ¥çš„ DFS æ˜¯ç”¨æ ˆï¼ˆéšå¼é€’å½’æ ˆæˆ–æ˜¾å¼æ ˆï¼‰æ¥åšæ·±åº¦æ¢ç´¢ï¼Œè€Œ BFS åˆ™æ˜¯ç”¨é˜Ÿåˆ—ï¼ˆ`deque`ï¼‰æ¥åšå¹¿åº¦ï¼ˆæŒ‰å±‚ï¼‰æ¢ç´¢ã€‚

**BFS æ‰¾è¿é€šåˆ†é‡çš„æ­¥éª¤**ï¼š

1. åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ— `queue`ï¼ŒæŠŠèµ·å§‹èŠ‚ç‚¹æ”¾è¿›å»ã€‚
2. ç»™èµ·å§‹èŠ‚ç‚¹æŸ“è‰² `color[start_node] = c`ã€‚
3. å¾ªç¯ç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼š
 * ä»é˜Ÿåˆ—å¤´éƒ¨å¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ `u`ã€‚
 * éå† `u` çš„æ‰€æœ‰é‚»å±… `v`ï¼š
 * å¦‚æœé‚»å±… `v` è¿˜æ²¡è¢«æŸ“è‰²ï¼ˆ`color[v] == -1`ï¼‰ï¼š
 * å°±ç»™å®ƒæŸ“ä¸ŠåŒä¸€ç§é¢œè‰² `color[v] = c`ã€‚
 * æŠŠå®ƒåŠ å…¥é˜Ÿåˆ—å°¾éƒ¨ `queue.append(v)`ã€‚

---

## ä»£ç å®ç°ï¼ˆPython, BFS ç‰ˆæœ¬ï¼‰

ä½ ä¼šå‘ç°ï¼Œåªæœ‰ `dfs` å‡½æ•°è¢«æ›¿æ¢æˆäº† `bfs` å‡½æ•°ï¼Œä¸»å‡½æ•° `minMalwareSpread` çš„é€»è¾‘**ä¸€ä¸ªå­—éƒ½ä¸ç”¨æ”¹**ã€‚

```python
from collections import deque
from typing import List


class Solution:
    """åŠ›æ‰£ 924. å°½é‡å‡å°‘æ¶æ„è½¯ä»¶çš„ä¼ æ’­é¢˜è§£ (BFS ç‰ˆæœ¬)."""

    def minMalwareSpread(self, graph: List[List[int]], initial: List[int]) -> int:
        """è¿”å›åº”è¯¥åˆ é™¤çš„åˆå§‹æ„ŸæŸ“ç‚¹ç¼–å·.

        ä½¿ç”¨ BFS å¯»æ‰¾è¿é€šåˆ†é‡ï¼Œå…¶ä½™é€»è¾‘ä¸ DFS ç‰ˆæœ¬å®Œå…¨ç›¸åŒã€‚

        Args:
            graph: é‚»æ¥çŸ©é˜µå½¢å¼çš„æ— å‘å›¾ã€‚
            initial: åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹ç¼–å·åˆ—è¡¨ã€‚

        Returns:
            int: è¦åˆ é™¤çš„åˆå§‹æ„ŸæŸ“èŠ‚ç‚¹ç¼–å·ã€‚
        """
        n = len(graph)
        color = [-1] * n  # color[i] è¡¨ç¤ºèŠ‚ç‚¹ i æ‰€åœ¨è¿é€šåˆ†é‡çš„ç¼–å·
        comp_count = 0

        def bfs(start_node: int, c: int) -> int:
            """BFS æŸ“è‰²ï¼Œè¿”å›å½“å‰è¿é€šåˆ†é‡çš„å¤§å°."""
            queue = deque([start_node])
            color[start_node] = c
            size = 0
            while queue:
                u = queue.popleft()
                size += 1
                # éå†æ‰€æœ‰å¯èƒ½çš„é‚»å±…
                for v in range(n):
                    if graph[u][v] == 1 and color[v] == -1:
                        color[v] = c
                        queue.append(v)
            return size

        # 1. æ‰¾å‡ºæ‰€æœ‰è¿é€šåˆ†é‡ï¼Œå¹¶è®°å½•æ¯ä¸ªåˆ†é‡çš„å¤§å° (è¿™éƒ¨åˆ†å’Œ DFS ç‰ˆæœ¬ä¸€æ ·)
        comp_sizes = []
        for i in range(n):
            if color[i] == -1:
                size = bfs(i, comp_count)  # <--- è¿™é‡Œè°ƒç”¨äº† bfs
                comp_sizes.append(size)
                comp_count += 1

        # --- ä»è¿™é‡Œå¼€å§‹ï¼Œä¸‹é¢çš„é€»è¾‘å’Œ DFS ç‰ˆæœ¬å®Œå…¨ä¸€æ · ---

        # 2. ç»Ÿè®¡æ¯ä¸ªè¿é€šåˆ†é‡ä¸­ï¼Œåˆå§‹æ„ŸæŸ“ç‚¹çš„æ•°é‡
        infect_cnt = [0] * comp_count
        for node in initial:
            c = color[node]
            infect_cnt[c] += 1

        # 3. åœ¨ initial ä¸­æ‰¾æœ€ä¼˜åˆ é™¤ç‚¹
        initial.sort()
        best_node = initial[0]
        best_saved = -1

        for node in initial:
            c = color[node]
            if infect_cnt[c] == 1:
                saved = comp_sizes[c]
                if saved > best_saved:
                    best_saved = saved
                    best_node = node

        return best_node
```

---

### DFS vs. BFS åœ¨è¿™é¢˜é‡Œçš„å¯¹æ¯”

| ç‰¹æ€§ | DFS (é€’å½’ç‰ˆ) | BFS (é˜Ÿåˆ—ç‰ˆ) | ç»“è®º |
| :------- | :----------------------------------------------------- | :------------------------------------------------------- | :----------- |
| **é€»è¾‘** | æ‰¾åˆ°ä¸€ä¸ªé‚»å±…å°±æ·±å…¥ä¸‹å»ï¼Œç›´åˆ°æ— è·¯å¯èµ°å†å›å¤´ã€‚ | å…ˆæŠŠæ‰€æœ‰ç›´æ¥é‚»å±…éƒ½è®¿é—®ä¸€éï¼Œå†è®¿é—®é‚»å±…çš„é‚»å±…ã€‚ | æ€è·¯ä¸åŒ |
| **ç»“æœ** | éƒ½èƒ½æ‰¾åˆ°å¹¶æ ‡è®°æ•´ä¸ªè¿é€šåˆ†é‡ã€‚ | éƒ½èƒ½æ‰¾åˆ°å¹¶æ ‡è®°æ•´ä¸ªè¿é€šåˆ†é‡ã€‚ | ç»“æœä¸€æ · |
| **æ€§èƒ½** | æ—¶é—´ `O(n^2)`ï¼Œç©ºé—´ `O(n)`ï¼ˆé€’å½’æ ˆï¼‰ã€‚ | æ—¶é—´ `O(n^2)`ï¼Œç©ºé—´ `O(n)`ï¼ˆé˜Ÿåˆ—ï¼‰ã€‚ | æ€§èƒ½ä¸€æ · |
| **é£é™©** | åœ¨å›¾å¾ˆâ€œæ·±â€çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´â€œé€’å½’æ ˆæº¢å‡ºâ€ã€‚ï¼ˆæœ¬é¢˜ä¸ä¼šï¼‰ | æ— æ­¤é£é™©ã€‚ | BFS ç¨ç¨³å¥ |
| **é€‰æ‹©** | çº¯ç²¹æ˜¯ä¸ªäººåå¥½æˆ–ä¹ æƒ¯ã€‚ | çº¯ç²¹æ˜¯ä¸ªäººåå¥½æˆ–ä¹ æƒ¯ã€‚ | **ä»»é€‰å…¶ä¸€** |

**æ€»ç»“**ï¼šå¯¹äºè¿™ç±»â€œéå†å›¾â€ã€â€œæ‰¾è¿é€šå—â€çš„é—®é¢˜ï¼Œé¢è¯•æ—¶æ— è®ºä½ ç”¨ DFS è¿˜æ˜¯ BFSï¼Œé¢è¯•å®˜éƒ½ä¼šè®¤ä¸ºæ˜¯æ­£ç¡®çš„ã€‚èƒ½è¯´å‡ºä¸¤è€…å¯ä»¥äº’æ¢ï¼Œå¹¶ä¸”çŸ¥é“å®ƒä»¬å„è‡ªçš„å®ç°æ–¹å¼ï¼ˆæ ˆ vs é˜Ÿåˆ—ï¼‰ï¼Œå°±éå¸¸åŠ åˆ†äº†ã€‚
